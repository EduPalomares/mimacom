{"version":3,"sources":["helpers/setVH.js","assets/basket.svg","layout/Products/product.tsx","layout/Products/products.tsx","layout/Basket/basket.tsx","layout/index.tsx","App.tsx","store/rootReducer.ts","store/store.ts","index.tsx","store/basket.ts","store/products.ts","store/ui.ts"],"names":["timeoutVH","setDocHeight","clearTimeout","setTimeout","document","documentElement","style","setProperty","window","innerHeight","addEventListener","Product","props","id","image_url","productName","price","productDescription","favorite","dispatch","useDispatch","stock","useSelector","state","products","className","backgroundImage","encodeURI","disabled","onClick","addToBasket","Products","useState","setProducts","productsList","setProductsList","page","setPage","basket","basketTotal","setBasketTotal","fetchProducts","useCallback","a","fetch","process","res","json","addProducts","useEffect","map","o","i","Object","entries","reduce","acc","setVisibleBasket","src","basketImg","alt","hidden","Basket","visibleBasket","ui","total","setTotal","items","rmvFromBasket","toggleVisibleBasket","v","forEach","method","headers","body","JSON","stringify","error","clearBasket","alert","Layout","require","App","rootReducer","combineReducers","basketReducer","productsReducer","uiReducer","store","configureStore","reducer","default","ReactDOM","render","getElementById","initialState","basketSlice","createSlice","name","reducers","setProductInBasket","payload","rmvProductFromBasket","actions","getState","product","setProduct","productsSlice","uiSlice"],"mappings":"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","file":"static/js/main.91523cd3.chunk.js","sourcesContent":["let timeoutVH\n\nfunction setDocHeight() {\n  timeoutVH = clearTimeout(timeoutVH)\n\n  timeoutVH = setTimeout(() => {\n    document.documentElement.style.setProperty(\n      '--vh',\n      `${window.innerHeight / 100}px`\n    )\n  }, 500)\n}\n\nwindow.addEventListener('resize', setDocHeight)\nwindow.addEventListener('orientationchange', setDocHeight)\n\nsetDocHeight()\n","export default __webpack_public_path__ + \"static/media/basket.c8405a74.svg\";","import { useSelector, useDispatch } from 'react-redux'\nimport { RootState } from 'store/rootReducer'\nimport { IProduct } from 'models/Product'\nimport { addToBasket } from 'store/basket'\n\nconst Product = (props: IProduct) => {\n  const {\n    id,\n    image_url,\n    productName,\n    price,\n    productDescription,\n    favorite\n  } = props\n\n  const dispatch = useDispatch()\n  const storedProducts: any = useSelector((state: RootState) => state.products)\n  const stock = storedProducts[id]?.stock || 0\n\n  return (\n    <>\n      <div className=\"product\">\n        <div className={`product__favorite ${favorite ? 'active' : ''}`}></div>\n        <div\n          className=\"product__img\"\n          style={{ backgroundImage: 'url(' + encodeURI(image_url) + ')' }}\n        />\n        <div className=\"product__info\">\n          <div className=\"product__name\">{productName}</div>\n          <div className=\"product__price\">{price}</div>\n          <div className=\"product__description\">{productDescription}</div>\n        </div>\n        <div className=\"product__actions\">\n          <div className=\"product__stock\">{stock} left</div>\n          <button\n            disabled={stock === 0}\n            onClick={() => dispatch(addToBasket(id))}\n          >\n            + Add\n          </button>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Product\n","import { useCallback, useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from 'store/rootReducer'\nimport { OverlayScrollbarsComponent } from 'overlayscrollbars-react'\nimport { addProducts } from 'store/products'\nimport { setVisibleBasket } from 'store/ui'\n\nimport basketImg from 'assets/basket.svg'\n\nimport Product from './product'\n\nconst Products = () => {\n  const dispatch = useDispatch()\n\n  const [products, setProducts] = useState([])\n  const [productsList, setProductsList] = useState<any>([])\n  const [page, setPage] = useState(1)\n  const basket: any = useSelector((state: RootState) => state.basket)\n  const [basketTotal, setBasketTotal] = useState(0)\n\n  const fetchProducts = useCallback(async () => {\n    try {\n      const res = await fetch(\n        `${process.env.REACT_APP_API}/grocery?_page=${page}&_limit=12`\n      )\n      const json = await res.json()\n      setProducts(json)\n      dispatch(addProducts(json))\n    } catch (error) {}\n  }, [dispatch, page])\n\n  const previousPage = () => {\n    setPage(page - 1)\n  }\n\n  const nextPage = () => {\n    setPage(page + 1)\n  }\n\n  useEffect(() => {\n    setProductsList(products.map((o, i) => <Product key={i} {...o} />))\n  }, [products])\n\n  useEffect(() => {\n    fetchProducts()\n  }, [page, fetchProducts])\n\n  useEffect(() => {\n    setBasketTotal(\n      Object.entries(basket).reduce((acc, [k, v]: any) => {\n        return acc + v.stock\n      }, 0)\n    )\n  }, [basket])\n\n  return (\n    <>\n      <div className=\"products\">\n        <div className=\"products__header\">\n          <h1>Product List</h1>\n\n          <div className=\"products__actions\">\n            <div className=\"products__action products__action__basket\">\n              <button onClick={() => dispatch(setVisibleBasket(true))}>\n                <img src={basketImg} alt=\"\" />\n              </button>\n              <div\n                className=\"products__actions__basket__amount\"\n                hidden={basketTotal === 0}\n              >\n                {basketTotal}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <OverlayScrollbarsComponent className=\"products__list__wrapper\">\n          <div className=\"products__list\">{productsList}</div>\n        </OverlayScrollbarsComponent>\n\n        <div className=\"products__list__actions\">\n          <button\n            className=\"products__list__actions__previous\"\n            onClick={previousPage}\n            disabled={page === 1}\n          >\n            Previous\n          </button>\n          <button className=\"products__list__actions__next\" onClick={nextPage}>\n            Next\n          </button>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Products\n","import { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { RootState } from 'store/rootReducer'\nimport { OverlayScrollbarsComponent } from 'overlayscrollbars-react'\n\nimport { addToBasket, clearBasket, rmvFromBasket } from 'store/basket'\nimport { setVisibleBasket } from 'store/ui'\n\nconst Basket = () => {\n  const dispatch = useDispatch()\n  const basket: any = useSelector((state: RootState) => state.basket)\n  const products: any = useSelector((state: RootState) => state.products)\n  const visibleBasket: boolean = useSelector(\n    (state: RootState) => state.ui.visibleBasket\n  )\n  const [total, setTotal] = useState(0)\n\n  const items = Object.entries(basket).map(([k, o]: any) => {\n    return (\n      <div key={o.id} className=\"basket__item\">\n        <div\n          className=\"basket__item__image\"\n          style={{ backgroundImage: 'url(' + encodeURI(o.image_url) + ')' }}\n        />\n        <div className=\"basket__item__middle\">\n          <div className=\"basket__item__name\">{o.productName}</div>\n          <div className=\"basket__item__amount\">\n            <button\n              className=\"basket__item__subtract\"\n              onClick={() => dispatch(rmvFromBasket(o.id))}\n            />\n            {o.stock}\n            <button\n              className=\"basket__item__add\"\n              onClick={() => dispatch(addToBasket(o.id))}\n            />\n          </div>\n        </div>\n        <div className=\"basket__item__price\">{o.price}</div>\n      </div>\n    )\n  })\n\n  const makePayment = () => {\n    try {\n      Object.entries(basket).forEach(async ([k, o]: any) => {\n        await fetch(`http://localhost:3000/grocery/` + o.id, {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ...o,\n            stock: products[o.id].stock - basket[o.id].stock\n          })\n        })\n      })\n    } catch (error) {}\n    dispatch(clearBasket())\n    alert('Purchase Completed!!!')\n  }\n\n  const toggleVisibleBasket = () => {\n    dispatch(setVisibleBasket(!visibleBasket))\n  }\n\n  useEffect(() => {\n    setTotal(\n      Object.entries(basket).reduce((acc, [k, v]: any) => {\n        return acc + v.stock * v.price\n      }, 0)\n    )\n  }, [basket])\n\n  return (\n    <>\n      <div className={`basket__wrapper ${visibleBasket ? 'visible' : ''}`}>\n        <div className={`basket__bg`} onClick={toggleVisibleBasket} />\n        <div className=\"basket\">\n          <div className=\"basket__header\" onClick={toggleVisibleBasket}>\n            <h1>Basket</h1>\n            <button className=\"basket__back\" />\n          </div>\n\n          <OverlayScrollbarsComponent className=\"basket__items__wrapper\">\n            <div className=\"basket__items\">{items}</div>\n          </OverlayScrollbarsComponent>\n\n          <div className=\"basket__resume\">\n            <div className=\"basket__total\">\n              <div className=\"basket__total__text\">Total Amount</div>\n              <div className=\"basket__total__price\">{total}</div>\n            </div>\n            <div className=\"basket__actions\">\n              <button disabled={total === 0} onClick={makePayment}>\n                Make a payment\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Basket\n","import Products from './Products/products'\nimport Basket from './Basket/basket'\n\nconst Layout = () => {\n  return (\n    <>\n      <main className=\"mimacom\">\n        <Products />\n        <Basket />\n      </main>\n    </>\n  )\n}\n\nexport default Layout\n","import 'overlayscrollbars/css/OverlayScrollbars.css'\nimport './App.css'\nimport Layout from './layout'\n\nrequire('./helpers/setVH')\n\nconst App = () => {\n  return (\n    <>\n      <Layout />\n    </>\n  )\n}\n\nexport default App\n","import { combineReducers } from '@reduxjs/toolkit'\n\nimport basketReducer from './basket'\nimport productsReducer from './products'\nimport uiReducer from './ui'\n\nconst rootReducer = combineReducers({\n  basket: basketReducer,\n  products: productsReducer,\n  ui: uiReducer\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\n\nexport default rootReducer\n","import { configureStore, Action } from '@reduxjs/toolkit'\nimport { ThunkAction } from 'redux-thunk'\n\nimport rootReducer, { RootState } from './rootReducer'\n\nconst store = configureStore({\n  reducer: rootReducer\n})\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').default\n    store.replaceReducer(newRootReducer)\n  })\n}\n\nexport type AppDispatch = typeof store.dispatch\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\n\nexport default store\n","import ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport store from './store/store'\n\nconst render = () => {\n  const App = require('./App').default\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render)\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { AppThunk } from './store'\nimport { IProduct } from 'models/Product'\nimport { setProduct } from './products'\n\ntype Product = IProduct\n\nlet initialState: any = {}\n\nconst basketSlice = createSlice({\n  name: 'basket',\n  initialState: initialState,\n  reducers: {\n    clearBasket() {\n      return initialState\n    },\n\n    setProductInBasket(state, { payload }: PayloadAction<Product>) {\n      state[payload.id] = payload\n    },\n\n    rmvProductFromBasket(state, { payload }: PayloadAction<string>) {\n      delete state[payload]\n    }\n  }\n})\n\nexport const {\n  clearBasket,\n  setProductInBasket,\n  rmvProductFromBasket\n} = basketSlice.actions\nexport default basketSlice.reducer\n\nexport const addToBasket = (id: string): AppThunk => (dispatch, getState) => {\n  const basket = getState().basket\n  const products: any = getState().products\n  const product = basket[id]\n\n  product\n    ? dispatch(setProductInBasket({ ...product, stock: product.stock + 1 }))\n    : dispatch(setProductInBasket({ ...products[id], stock: 1 }))\n\n  dispatch(setProduct({ ...products[id], stock: products[id].stock - 1 }))\n}\n\nexport const rmvFromBasket = (id: string): AppThunk => (dispatch, getState) => {\n  const basket = getState().basket\n  const products: any = getState().products\n  const product = basket[id]\n\n  if (product) {\n    product.stock > 1\n      ? dispatch(setProductInBasket({ ...product, stock: product.stock - 1 }))\n      : dispatch(rmvProductFromBasket(id))\n\n    dispatch(setProduct({ ...products[id], stock: products[id].stock + 1 }))\n  }\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { IProduct } from 'models/Product'\n\nlet initialState = {}\n\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState: initialState,\n  reducers: {\n    addProducts(state: any, { payload }: PayloadAction<IProduct[]>) {\n      payload.forEach((o: IProduct) => {\n        state[o.id] = o\n      })\n    },\n    setProduct(state: any, { payload }: PayloadAction<IProduct>) {\n      state[payload.id] = payload\n    }\n  }\n})\n\nexport const { addProducts, setProduct } = productsSlice.actions\n\nexport default productsSlice.reducer\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { IUI } from '../models/UI'\n\nlet initialState: IUI = {\n  visibleBasket: false\n}\n\nconst uiSlice = createSlice({\n  name: 'ui',\n  initialState: initialState,\n  reducers: {\n    setVisibleBasket(state: any, { payload }: PayloadAction<boolean>) {\n      state.visibleBasket = payload\n    }\n  }\n})\n\nexport const { setVisibleBasket } = uiSlice.actions\n\nexport default uiSlice.reducer\n"],"sourceRoot":""}