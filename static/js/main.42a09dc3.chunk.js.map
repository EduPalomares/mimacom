{"version":3,"sources":["index.tsx","helpers/setVH.js","store/products.ts","store/basket.ts","store/ui.ts","store/rootReducer.ts","store/store.ts","hocs/KeyboardEvents.jsx","config/config.js","assets/basket.svg","layout/Products/product.tsx","layout/Products/products.tsx","layout/Basket/basket.tsx","layout/index.tsx","App.tsx"],"names":["App","require","default","ReactDOM","render","document","getElementById","timeoutVH","setDocHeight","clearTimeout","setTimeout","documentElement","style","setProperty","window","innerHeight","addEventListener","productsSlice","createSlice","name","initialState","reducers","addProducts","state","payload","forEach","o","id","setProduct","actions","basketSlice","clearBasket","setProductInBasket","rmvProductFromBasket","addToBasket","dispatch","getState","basket","products","product","stock","uiSlice","visibleBasket","setVisibleBasket","rootReducer","combineReducers","basketReducer","productsReducer","ui","uiReducer","store","keybindings","configureStore","reducer","INITIAL_KEYBINDINGS","KeyboardContext","React","createContext","useKEvents","useContext","setKeyboardEvents","useCallback","onkeydown","e","sent","event","key","altKey","ctrlKey","shiftKey","prevent","preventDefault","stopPropagation","eventName","func","CustomEvent","detail","message","dispatchEvent","dispatchAppEvent","f","useEffect","addKEvent","keys","removeKEvent","KeyboardEvents","props","Provider","value","children","Product","image_url","productName","price","productDescription","favorite","useDispatch","useSelector","className","backgroundImage","encodeURI","disabled","onClick","Products","useState","setProducts","productsList","setProductsList","page","setPage","basketTotal","setBasketTotal","fetchProducts","a","fetch","process","res","json","map","i","Object","entries","reduce","acc","innerWidth","src","basketImg","alt","hidden","Basket","total","setTotal","items","toggleVisibleBasket","v","method","headers","body","JSON","stringify","error","alert","Layout"],"mappings":"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","file":"static/js/main.42a09dc3.chunk.js","sourcesContent":["import ReactDOM from 'react-dom'\n\nconst render = () => {\n  const App = require('./App').default\n\n  ReactDOM.render(<App />, document.getElementById('root'))\n}\n\nrender()\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render)\n}\n","let timeoutVH\n\nfunction setDocHeight() {\n  timeoutVH = clearTimeout(timeoutVH)\n\n  timeoutVH = setTimeout(() => {\n    document.documentElement.style.setProperty(\n      '--vh',\n      `${window.innerHeight / 100}px`\n    )\n  }, 500)\n}\n\nwindow.addEventListener('resize', setDocHeight)\nwindow.addEventListener('orientationchange', setDocHeight)\n\nsetDocHeight()\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { IProduct } from 'models/Product'\n\nlet initialState = {}\n\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState: initialState,\n  reducers: {\n    addProducts(state: any, { payload }: PayloadAction<IProduct[]>) {\n      payload.forEach((o: IProduct) => {\n        state[o.id] = o\n      })\n    },\n    setProduct(state: any, { payload }: PayloadAction<IProduct>) {\n      state[payload.id] = payload\n    }\n  }\n})\n\nexport const { addProducts, setProduct } = productsSlice.actions\n\nexport default productsSlice.reducer\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { AppThunk } from './store'\nimport { IProduct } from 'models/Product'\nimport { setProduct } from './products'\n\ntype Product = IProduct\n\nlet initialState: any = {}\n\nconst basketSlice = createSlice({\n  name: 'basket',\n  initialState: initialState,\n  reducers: {\n    clearBasket() {\n      return initialState\n    },\n\n    setProductInBasket(state, { payload }: PayloadAction<Product>) {\n      state[payload.id] = payload\n    },\n\n    rmvProductFromBasket(state, { payload }: PayloadAction<string>) {\n      delete state[payload]\n    }\n  }\n})\n\nexport const {\n  clearBasket,\n  setProductInBasket,\n  rmvProductFromBasket\n} = basketSlice.actions\nexport default basketSlice.reducer\n\nexport const addToBasket = (id: string): AppThunk => (dispatch, getState) => {\n  const basket = getState().basket\n  const products: any = getState().products\n  const product = basket[id]\n\n  product\n    ? dispatch(setProductInBasket({ ...product, stock: product.stock + 1 }))\n    : dispatch(setProductInBasket({ ...products[id], stock: 1 }))\n\n  dispatch(setProduct({ ...products[id], stock: products[id].stock - 1 }))\n}\n\nexport const rmvFromBasket = (id: string): AppThunk => (dispatch, getState) => {\n  const basket = getState().basket\n  const products: any = getState().products\n  const product = basket[id]\n\n  if (product) {\n    product.stock > 1\n      ? dispatch(setProductInBasket({ ...product, stock: product.stock - 1 }))\n      : dispatch(rmvProductFromBasket(id))\n\n    dispatch(setProduct({ ...products[id], stock: products[id].stock + 1 }))\n  }\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { IUI } from '../models/UI'\n\nlet initialState: IUI = {\n  visibleBasket: false\n}\n\nconst uiSlice = createSlice({\n  name: 'ui',\n  initialState: initialState,\n  reducers: {\n    setVisibleBasket(state: any, { payload }: PayloadAction<boolean>) {\n      state.visibleBasket = payload\n    }\n  }\n})\n\nexport const { setVisibleBasket } = uiSlice.actions\n\nexport default uiSlice.reducer\n","import { combineReducers } from '@reduxjs/toolkit'\n\nimport basketReducer from './basket'\nimport productsReducer from './products'\nimport uiReducer from './ui'\n\nconst rootReducer = combineReducers({\n  basket: basketReducer,\n  products: productsReducer,\n  ui: uiReducer\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\n\nexport default rootReducer\n","import { configureStore, Action } from '@reduxjs/toolkit'\nimport { ThunkAction } from 'redux-thunk'\n\nimport rootReducer, { RootState } from './rootReducer'\n\nconst store = configureStore({\n  reducer: rootReducer\n})\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').default\n    store.replaceReducer(newRootReducer)\n  })\n}\n\nexport type AppDispatch = typeof store.dispatch\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\n\nexport default store\n","import React, { useCallback, useEffect, useContext } from 'react'\nimport { INITIAL_KEYBINDINGS } from 'config/config'\n\n/**\n@componentName KeyboardEvents\n@description Provider to handle keybindings\n*/\n\nlet keybindings\n\nconst dispatchAppEvent = (eventName, func, payload) => {\n  if (!typeof func === 'function') return\n  func()\n  const event = new CustomEvent(eventName, { detail: payload.message })\n  document.dispatchEvent(event)\n}\n\nexport const KeyboardContext = React.createContext()\n\nexport const useKEvents = () => {\n  keybindings = useContext(KeyboardContext)\n\n  // Ej: (alt-s, ()=>{}, false), Prevent is default\n  const addKEvent = (keys, func, prevent = true) => {\n    keybindings[keys] = { f: func, prevent: prevent }\n  }\n\n  const removeKEvent = (keys) => {\n    keybindings[keys] = null\n  }\n\n  const setKeyboardEvents = useCallback(() => {\n    document.onkeydown = (e) => {\n      e = e || window.event\n      let sent = e.key\n\n      if (e.altKey && sent !== 'Alt') {\n        sent = 'Alt+' + sent\n      }\n\n      if (e.ctrlKey && sent !== 'Control') {\n        sent = 'Control+' + sent\n      }\n\n      if (e.shiftKey && sent !== 'Shift') {\n        sent = 'Shift+' + sent\n      }\n\n      if (keybindings?.[sent]) {\n        if (keybindings[sent].prevent) {\n          e.preventDefault()\n          e.stopPropagation()\n        }\n        dispatchAppEvent(sent, () => keybindings[sent].f(), {\n          message: 'New Event: ' + sent\n        })\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    setKeyboardEvents()\n  }, [setKeyboardEvents])\n\n  return { addKEvent, removeKEvent, setKeyboardEvents }\n}\n\nconst KeyboardEvents = (props) => {\n  return (\n    <>\n      <KeyboardContext.Provider value={INITIAL_KEYBINDINGS}>\n        {props.children}\n      </KeyboardContext.Provider>\n    </>\n  )\n}\n\nexport default KeyboardEvents\n","let INITIAL_KEYBINDINGS = []\nexport { INITIAL_KEYBINDINGS }\n","export default __webpack_public_path__ + \"static/media/basket.c8405a74.svg\";","import { useSelector, useDispatch } from 'react-redux'\nimport { RootState } from 'store/rootReducer'\nimport { IProduct } from 'models/Product'\nimport { addToBasket } from 'store/basket'\n\nconst Product = (props: IProduct) => {\n  const {\n    id,\n    image_url,\n    productName,\n    price,\n    productDescription,\n    favorite\n  } = props\n\n  const dispatch = useDispatch()\n  const storedProducts: any = useSelector((state: RootState) => state.products)\n  const stock = storedProducts[id]?.stock || 0\n\n  const addProduct = () => {\n    dispatch(addToBasket(id))\n  }\n\n  return (\n    <>\n      <div className=\"product\">\n        <div className={`product__favorite ${favorite ? 'active' : ''}`}></div>\n        <div\n          className=\"product__img\"\n          style={{ backgroundImage: 'url(' + encodeURI(image_url) + ')' }}\n        />\n        <div className=\"product__info\">\n          <div className=\"product__name\">{productName}</div>\n          <div className=\"product__price\">{price}</div>\n          <div className=\"product__description\">{productDescription}</div>\n        </div>\n        <div className=\"product__actions\">\n          <div className=\"product__stock\">{stock} left</div>\n          <button disabled={stock === 0} onClick={addProduct}>\n            + Add\n          </button>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Product\n","import { useCallback, useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from 'store/rootReducer'\nimport { useKEvents } from 'hocs/KeyboardEvents'\nimport { OverlayScrollbarsComponent } from 'overlayscrollbars-react'\nimport { addProducts } from 'store/products'\nimport { setVisibleBasket } from 'store/ui'\n\nimport basketImg from 'assets/basket.svg'\n\nimport Product from './product'\n\nconst Products = () => {\n  const dispatch = useDispatch()\n  const { addKEvent, removeKEvent } = useKEvents()\n\n  const [products, setProducts] = useState([])\n  const [productsList, setProductsList] = useState<any>([])\n  const [page, setPage] = useState(1)\n  const basket: any = useSelector((state: RootState) => state.basket)\n  const [basketTotal, setBasketTotal] = useState(0)\n\n  const fetchProducts = useCallback(async () => {\n    try {\n      const res = await fetch(\n        `${process.env.REACT_APP_API}/grocery?_page=${page}&_limit=12`\n      )\n      const json = await res.json()\n      setProducts(json)\n      dispatch(addProducts(json))\n    } catch (error) {}\n  }, [dispatch, page])\n\n  const previousPage = () => {\n    setPage(page - 1)\n  }\n\n  const nextPage = () => {\n    setPage(page + 1)\n  }\n\n  useEffect(() => {\n    setProductsList(products.map((o, i) => <Product key={i} {...o} />))\n  }, [products])\n\n  useEffect(() => {\n    fetchProducts()\n  }, [page, fetchProducts])\n\n  useEffect(() => {\n    setBasketTotal(\n      Object.entries(basket).reduce((acc, [k, v]: any) => {\n        return acc + v.stock\n      }, 0)\n    )\n  }, [basket])\n\n  useEffect(() => {\n    if (window.innerWidth < 1024) {\n      addKEvent('ArrowLeft', () => {\n        dispatch(setVisibleBasket(true))\n      })\n\n      addKEvent('ArrowRight', () => {\n        dispatch(setVisibleBasket(false))\n      })\n\n      return () => {\n        removeKEvent('ArrowLeft')\n        removeKEvent('ArrowRight')\n      }\n    }\n  }, [addKEvent, removeKEvent, dispatch])\n\n  return (\n    <>\n      <div className=\"products\">\n        <div className=\"products__header\">\n          <h1>Product List</h1>\n\n          <div className=\"products__actions\">\n            <div className=\"products__action products__action__basket\">\n              <button onClick={() => dispatch(setVisibleBasket(true))}>\n                <img src={basketImg} alt=\"\" />\n              </button>\n              <div\n                className=\"products__actions__basket__amount\"\n                hidden={basketTotal === 0}\n              >\n                {basketTotal}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <OverlayScrollbarsComponent className=\"products__list__wrapper\">\n          <div className=\"products__list\">{productsList}</div>\n        </OverlayScrollbarsComponent>\n\n        <div className=\"products__list__actions\">\n          <button\n            className=\"products__list__actions__previous\"\n            onClick={previousPage}\n            disabled={page === 1}\n          >\n            Previous\n          </button>\n          <button className=\"products__list__actions__next\" onClick={nextPage}>\n            Next\n          </button>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Products\n","import { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { RootState } from 'store/rootReducer'\nimport { OverlayScrollbarsComponent } from 'overlayscrollbars-react'\n\nimport { addToBasket, clearBasket, rmvFromBasket } from 'store/basket'\nimport { setVisibleBasket } from 'store/ui'\n\nconst Basket = () => {\n  const dispatch = useDispatch()\n  const basket: any = useSelector((state: RootState) => state.basket)\n  const products: any = useSelector((state: RootState) => state.products)\n  const visibleBasket: boolean = useSelector(\n    (state: RootState) => state.ui.visibleBasket\n  )\n  const [total, setTotal] = useState(0)\n\n  const items = Object.entries(basket).map(([k, o]: any) => {\n    return (\n      <div key={o.id} className=\"basket__item\">\n        <div\n          className=\"basket__item__image\"\n          style={{ backgroundImage: 'url(' + encodeURI(o.image_url) + ')' }}\n        />\n        <div className=\"basket__item__middle\">\n          <div className=\"basket__item__name\">{o.productName}</div>\n          <div className=\"basket__item__amount\">\n            <button\n              className=\"basket__item__subtract\"\n              onClick={() => dispatch(rmvFromBasket(o.id))}\n            />\n            {o.stock}\n            <button\n              className=\"basket__item__add\"\n              onClick={() => dispatch(addToBasket(o.id))}\n            />\n          </div>\n        </div>\n        <div className=\"basket__item__price\">{o.price}</div>\n      </div>\n    )\n  })\n\n  const makePayment = () => {\n    try {\n      Object.entries(basket).forEach(async ([k, o]: any) => {\n        await fetch(`http://localhost:3000/grocery/` + o.id, {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ...o,\n            stock: products[o.id].stock - basket[o.id].stock\n          })\n        })\n      })\n    } catch (error) {}\n    dispatch(clearBasket())\n    alert('Purchase Completed!!!')\n  }\n\n  const toggleVisibleBasket = () => {\n    dispatch(setVisibleBasket(!visibleBasket))\n  }\n\n  useEffect(() => {\n    setTotal(\n      Object.entries(basket).reduce((acc, [k, v]: any) => {\n        return acc + v.stock * v.price\n      }, 0)\n    )\n  }, [basket])\n\n  return (\n    <>\n      <div className={`basket__wrapper ${visibleBasket ? 'visible' : ''}`}>\n        <div className={`basket__bg`} onClick={toggleVisibleBasket} />\n        <div className=\"basket\">\n          <div className=\"basket__header\" onClick={toggleVisibleBasket}>\n            <h1>Basket</h1>\n            <button className=\"basket__back\" />\n          </div>\n\n          <OverlayScrollbarsComponent className=\"basket__items__wrapper\">\n            <div className=\"basket__items\">{items}</div>\n          </OverlayScrollbarsComponent>\n\n          <div className=\"basket__resume\">\n            <div className=\"basket__total\">\n              <div className=\"basket__total__text\">Total Amount</div>\n              <div className=\"basket__total__price\">{total}</div>\n            </div>\n            <div className=\"basket__actions\">\n              <button disabled={total === 0} onClick={makePayment}>\n                Make a payment\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Basket\n","import Products from './Products/products'\nimport Basket from './Basket/basket'\n\nconst Layout = () => {\n  return (\n    <>\n      <main className=\"mimacom\">\n        <Products />\n        <Basket />\n      </main>\n    </>\n  )\n}\n\nexport default Layout\n","import { Provider } from 'react-redux'\nimport store from './store/store'\nimport KeyboardEvents, { useKEvents } from 'hocs/KeyboardEvents'\n\nimport 'overlayscrollbars/css/OverlayScrollbars.css'\nimport './App.css'\nimport Layout from './layout'\n\nrequire('./helpers/setVH')\n\nconst App = () => {\n  useKEvents()\n\n  return (\n    <>\n      <Provider store={store}>\n        <KeyboardEvents>\n          <Layout />\n        </KeyboardEvents>\n      </Provider>\n    </>\n  )\n}\n\nexport default App\n"],"sourceRoot":""}